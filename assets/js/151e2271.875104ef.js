"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[40267],{15680:(e,a,t)=>{t.d(a,{xA:()=>p,yg:()=>c});var n=t(96540);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?i(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function o(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=n.createContext({}),d=function(e){var a=n.useContext(s),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},p=function(e){var a=d(e.components);return n.createElement(s.Provider,{value:a},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,p=o(e,["components","mdxType","originalType","parentName"]),g=d(t),m=r,c=g["".concat(s,".").concat(m)]||g[m]||u[m]||i;return t?n.createElement(c,l(l({ref:a},p),{},{components:t})):n.createElement(c,l({ref:a},p))}));function c(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var i=t.length,l=new Array(i);l[0]=m;var o={};for(var s in a)hasOwnProperty.call(a,s)&&(o[s]=a[s]);o.originalType=e,o[g]="string"==typeof e?e:r,l[1]=o;for(var d=2;d<i;d++)l[d]=t[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},76599:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>s,default:()=>c,frontMatter:()=>o,metadata:()=>d,toc:()=>g});t(96540);var n=t(15680);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function i(e,a){return a=null!=a?a:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):function(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})),e}function l(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}const o={sidebar_position:3,title:"DataFlow",slug:"/generated/metamodel/entities/dataflow-datahub",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/dataFlow-datahub.md"},s="DataFlow",d={unversionedId:"docs/generated/metamodel/entities/dataFlow-datahub",id:"docs/generated/metamodel/entities/dataFlow-datahub",title:"DataFlow",description:"A DataFlow represents a high-level data processing pipeline or workflow orchestrated by systems like Apache Airflow, Azkaban, Prefect, Dagster, or similar workflow management platforms. DataFlows serve as containers for related DataJobs, representing the overall execution context and organization of data processing tasks.",source:"@site/genDocs/docs/generated/metamodel/entities/dataFlow-datahub.md",sourceDirName:"docs/generated/metamodel/entities",slug:"/generated/metamodel/entities/dataflow-datahub",permalink:"/docs/generated/metamodel/entities/dataflow-datahub",draft:!1,editUrl:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/dataFlow-datahub.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"DataFlow",slug:"/generated/metamodel/entities/dataflow-datahub",custom_edit_url:"https://github.com/datahub-project/datahub/blob/master/docs/generated/metamodel/entities/dataFlow-datahub.md"},sidebar:"overviewSidebar",previous:{title:"DataJob",permalink:"/docs/generated/metamodel/entities/datajob"},next:{title:"DataFlow",permalink:"/docs/generated/metamodel/entities/dataflow"}},p={},g=[{value:"Identity",id:"identity",level:2},{value:"URN Examples",id:"urn-examples",level:3},{value:"Important Capabilities",id:"important-capabilities",level:2},{value:"Core DataFlow Information",id:"core-dataflow-information",level:3},{value:"Editable Properties",id:"editable-properties",level:3},{value:"Version Information",id:"version-information",level:3},{value:"Relationship with DataJobs",id:"relationship-with-datajobs",level:3},{value:"Incidents Tracking",id:"incidents-tracking",level:3},{value:"Code Examples",id:"code-examples",level:2},{value:"Creating a DataFlow",id:"creating-a-dataflow",level:3},{value:"Creating a DataFlow with Comprehensive Metadata",id:"creating-a-dataflow-with-comprehensive-metadata",level:3},{value:"Reading DataFlow Metadata",id:"reading-dataflow-metadata",level:3},{value:"Adding Tags and Terms to a DataFlow",id:"adding-tags-and-terms-to-a-dataflow",level:3},{value:"Adding Ownership to a DataFlow",id:"adding-ownership-to-a-dataflow",level:3},{value:"Querying DataFlow via REST API",id:"querying-dataflow-via-rest-api",level:3},{value:"Creating DataFlow with DataJobs",id:"creating-dataflow-with-datajobs",level:3},{value:"Integration Points",id:"integration-points",level:2},{value:"Relationship with DataJobs",id:"relationship-with-datajobs-1",level:3},{value:"Relationship with Datasets",id:"relationship-with-datasets",level:3},{value:"Orchestrator Platform Integration",id:"orchestrator-platform-integration",level:3},{value:"DataProcessInstance Tracking",id:"dataprocessinstance-tracking",level:3},{value:"GraphQL Integration",id:"graphql-integration",level:3},{value:"Notable Exceptions",id:"notable-exceptions",level:2},{value:"Cluster vs Environment",id:"cluster-vs-environment",level:3},{value:"Platform vs Orchestrator",id:"platform-vs-orchestrator",level:3},{value:"Legacy API vs SDK",id:"legacy-api-vs-sdk",level:3},{value:"DataFlow vs DataPipeline",id:"dataflow-vs-datapipeline",level:3},{value:"Technical Reference",id:"technical-reference",level:2}],u={toc:g},m="wrapper";function c(e){var{components:a}=e,t=l(e,["components"]);return(0,n.yg)(m,i(function(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(a){r(e,a,t[a])}))}return e}({},u,t),{components:a,mdxType:"MDXLayout"}),(0,n.yg)("h1",{id:"dataflow"},"DataFlow"),(0,n.yg)("p",null,"A DataFlow represents a high-level data processing pipeline or workflow orchestrated by systems like Apache Airflow, Azkaban, Prefect, Dagster, or similar workflow management platforms. DataFlows serve as containers for related DataJobs, representing the overall execution context and organization of data processing tasks."),(0,n.yg)("h2",{id:"identity"},"Identity"),(0,n.yg)("p",null,"DataFlows are uniquely identified by three components:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Orchestrator"),": The workflow management platform that executes the flow (e.g., ",(0,n.yg)("inlineCode",{parentName:"li"},"airflow"),", ",(0,n.yg)("inlineCode",{parentName:"li"},"azkaban"),", ",(0,n.yg)("inlineCode",{parentName:"li"},"prefect"),", ",(0,n.yg)("inlineCode",{parentName:"li"},"dagster"),")"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Flow ID"),": A unique identifier for the workflow within the orchestrator (typically the DAG name, pipeline name, or workflow identifier)"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Cluster"),": The execution environment or cluster where the flow runs (e.g., ",(0,n.yg)("inlineCode",{parentName:"li"},"prod"),", ",(0,n.yg)("inlineCode",{parentName:"li"},"staging"),", ",(0,n.yg)("inlineCode",{parentName:"li"},"dev"),")")),(0,n.yg)("p",null,"The URN structure follows this pattern:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"urn:li:dataFlow:(<orchestrator>,<flowId>,<cluster>)\n")),(0,n.yg)("h3",{id:"urn-examples"},"URN Examples"),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Apache Airflow DAG in production:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"urn:li:dataFlow:(airflow,daily_sales_pipeline,prod)\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Prefect flow in staging:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"urn:li:dataFlow:(prefect,customer_analytics,staging)\n")),(0,n.yg)("p",null,(0,n.yg)("strong",{parentName:"p"},"Azkaban workflow in development:")),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"urn:li:dataFlow:(azkaban,data_quality_checks,dev)\n")),(0,n.yg)("h2",{id:"important-capabilities"},"Important Capabilities"),(0,n.yg)("h3",{id:"core-dataflow-information"},"Core DataFlow Information"),(0,n.yg)("p",null,"DataFlows maintain essential metadata about the pipeline through the ",(0,n.yg)("inlineCode",{parentName:"p"},"dataFlowInfo")," aspect:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Name"),": The display name of the flow (may differ from flow_id)"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Description"),": Detailed explanation of what the flow does and its purpose"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Project"),": Optional namespace or project the flow belongs to"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Created/Modified Timestamps"),": When the flow was created and last modified in the source system"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"External URL"),": Link to the flow in the orchestration platform's UI"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Custom Properties"),": Key-value pairs for additional platform-specific metadata"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Environment"),": The fabric type (PROD, DEV, STAGING, etc.)")),(0,n.yg)("h3",{id:"editable-properties"},"Editable Properties"),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"editableDataFlowProperties")," aspect allows users to modify certain properties through the DataHub UI without interfering with ingestion from source systems:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Description"),": User-edited documentation that takes precedence over ingested descriptions")),(0,n.yg)("p",null,"This separation ensures that edits made in DataHub are preserved and not overwritten by subsequent ingestion runs."),(0,n.yg)("h3",{id:"version-information"},"Version Information"),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"versionInfo")," aspect tracks versioning details for the flow:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Version"),": An identifier like a git commit hash or md5 hash"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Version Type"),': The type of version identifier being used (e.g., "git", "md5")')),(0,n.yg)("p",null,"This is particularly useful for tracking changes to pipeline code and correlating pipeline versions with their execution history."),(0,n.yg)("h3",{id:"relationship-with-datajobs"},"Relationship with DataJobs"),(0,n.yg)("p",null,"DataFlows act as parent entities for DataJobs. Each DataJob's identity includes a reference to its parent DataFlow through the ",(0,n.yg)("inlineCode",{parentName:"p"},"flow")," field in the DataJobKey. This creates a hierarchical relationship:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre"},"DataFlow (Pipeline)\n  \u2514\u2500 DataJob (Task 1)\n  \u2514\u2500 DataJob (Task 2)\n  \u2514\u2500 DataJob (Task 3)\n")),(0,n.yg)("p",null,"This structure mirrors how workflow orchestrators organize tasks within DAGs or pipelines."),(0,n.yg)("h3",{id:"incidents-tracking"},"Incidents Tracking"),(0,n.yg)("p",null,"The ",(0,n.yg)("inlineCode",{parentName:"p"},"incidentsSummary")," aspect provides visibility into data quality or operational issues:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Active Incidents"),": Currently unresolved incidents affecting this flow"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Resolved Incidents"),": Historical record of incidents that have been addressed"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Incident Details"),": Type, priority, creation time, and resolution time for each incident")),(0,n.yg)("p",null,"This enables DataHub to serve as a centralized incident management system for data pipelines."),(0,n.yg)("h2",{id:"code-examples"},"Code Examples"),(0,n.yg)("h3",{id:"creating-a-dataflow"},"Creating a DataFlow"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Create a basic DataFlow"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.metadata.urns import TagUrn\nfrom datahub.sdk import DataFlow, DataHubClient\n\nclient = DataHubClient.from_env()\n\ndataflow = DataFlow(\n    name="example_dataflow",\n    platform="airflow",\n    description="airflow pipeline for production",\n    tags=[TagUrn(name="production"), TagUrn(name="data_engineering")],\n)\n\nclient.entities.upsert(dataflow)\n\n'))),(0,n.yg)("h3",{id:"creating-a-dataflow-with-comprehensive-metadata"},"Creating a DataFlow with Comprehensive Metadata"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Create a DataFlow with owners, tags, and custom properties"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'# metadata-ingestion/examples/library/dataflow_comprehensive.py\nfrom datetime import datetime, timezone\n\nfrom datahub.metadata.urns import CorpGroupUrn, CorpUserUrn, GlossaryTermUrn, TagUrn\nfrom datahub.sdk import DataFlow, DataHubClient\n\nclient = DataHubClient.from_env()\n\n# Create a DataFlow with comprehensive metadata\ndataflow = DataFlow(\n    platform="airflow",\n    name="daily_sales_aggregation",\n    display_name="Daily Sales Aggregation Pipeline",\n    platform_instance="PROD-US-EAST",\n    env="PROD",\n    description="Aggregates daily sales data from multiple sources and updates reporting tables",\n    external_url="https://airflow.company.com/dags/daily_sales_aggregation",\n    custom_properties={\n        "team": "analytics",\n        "schedule": "0 2 * * *",\n        "sla_hours": "4",\n        "priority": "high",\n    },\n    created=datetime(2024, 1, 15, tzinfo=timezone.utc),\n    last_modified=datetime.now(timezone.utc),\n    subtype="ETL",\n    owners=[\n        CorpUserUrn("jdoe"),\n        CorpGroupUrn("data-engineering"),\n    ],\n    tags=[\n        TagUrn(name="production"),\n        TagUrn(name="sales"),\n        TagUrn(name="critical"),\n    ],\n    terms=[\n        GlossaryTermUrn("Classification.Confidential"),\n    ],\n    domain="urn:li:domain:sales",\n)\n\n# Upsert the DataFlow\nclient.entities.upsert(dataflow)\n\nprint(f"Created DataFlow: {dataflow.urn}")\nprint(f"Display Name: {dataflow.display_name}")\nprint(f"Description: {dataflow.description}")\nprint(f"External URL: {dataflow.external_url}")\nprint(f"Custom Properties: {dataflow.custom_properties}")\n\n'))),(0,n.yg)("h3",{id:"reading-dataflow-metadata"},"Reading DataFlow Metadata"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Read a DataFlow and access its properties"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.sdk import DataFlowUrn, DataHubClient\n\nclient = DataHubClient.from_env()\n\n# Or get this from the UI (share -> copy urn) and use DataFlowUrn.from_string(...)\ndataflow_urn = DataFlowUrn("airflow", "example_dataflow_id")\n\ndataflow_entity = client.entities.get(dataflow_urn)\nprint("DataFlow name:", dataflow_entity.name)\nprint("DataFlow platform:", dataflow_entity.platform)\nprint("DataFlow description:", dataflow_entity.description)\n\n'))),(0,n.yg)("h3",{id:"adding-tags-and-terms-to-a-dataflow"},"Adding Tags and Terms to a DataFlow"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Add tags and glossary terms to a DataFlow"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'# metadata-ingestion/examples/library/dataflow_add_tags_terms.py\nfrom datahub.metadata.urns import DataFlowUrn, GlossaryTermUrn, TagUrn\nfrom datahub.sdk import DataHubClient\n\nclient = DataHubClient.from_env()\n\n# Get the existing DataFlow\ndataflow_urn = DataFlowUrn("airflow", "daily_sales_pipeline", "prod")\ndataflow = client.entities.get(dataflow_urn)\n\n# Add tags\ndataflow.add_tag(TagUrn(name="pii"))\ndataflow.add_tag(TagUrn(name="quarterly-review"))\n\n# Add glossary terms\ndataflow.add_term(GlossaryTermUrn("DataQuality.Validated"))\ndataflow.add_term(GlossaryTermUrn("BusinessCritical.Revenue"))\n\n# Save changes\nclient.entities.upsert(dataflow)\n\nprint(f"Updated DataFlow: {dataflow.urn}")\nprint(f"Tags: {[str(tag) for tag in dataflow.tags] if dataflow.tags else []}")\nprint(f"Terms: {[str(term) for term in dataflow.terms] if dataflow.terms else []}")\n\n'))),(0,n.yg)("h3",{id:"adding-ownership-to-a-dataflow"},"Adding Ownership to a DataFlow"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Set owners for a DataFlow"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'# metadata-ingestion/examples/library/dataflow_add_ownership.py\nfrom datahub.metadata.urns import CorpGroupUrn, CorpUserUrn, DataFlowUrn\nfrom datahub.sdk import DataHubClient\n\nclient = DataHubClient.from_env()\n\n# Get the existing DataFlow\ndataflow_urn = DataFlowUrn("airflow", "daily_sales_pipeline", "prod")\ndataflow = client.entities.get(dataflow_urn)\n\n# Add individual owners\ndataflow.add_owner((CorpUserUrn("alice"), "DATAOWNER"))\ndataflow.add_owner((CorpUserUrn("bob"), "DEVELOPER"))\n\n# Add group owner\ndataflow.add_owner((CorpGroupUrn("analytics-team"), "DATAOWNER"))\n\n# Save changes\nclient.entities.upsert(dataflow)\n\nprint(f"Updated DataFlow: {dataflow.urn}")\nprint(f"Owners: {dataflow.owners}")\n\n'))),(0,n.yg)("h3",{id:"querying-dataflow-via-rest-api"},"Querying DataFlow via REST API"),(0,n.yg)("p",null,"DataFlows can be queried using the standard DataHub REST APIs:"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"REST API: Fetch a DataFlow entity"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-bash"},"# Get a complete DataFlow snapshot\ncurl 'http://localhost:8080/entities/urn%3Ali%3AdataFlow%3A(airflow,daily_sales_pipeline,prod)'\n")),(0,n.yg)("p",null,"Response includes all aspects:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "urn": "urn:li:dataFlow:(airflow,daily_sales_pipeline,prod)",\n  "aspects": {\n    "dataFlowKey": {\n      "orchestrator": "airflow",\n      "flowId": "daily_sales_pipeline",\n      "cluster": "prod"\n    },\n    "dataFlowInfo": {\n      "name": "Daily Sales Pipeline",\n      "description": "Processes daily sales data and updates aggregates",\n      "project": "analytics",\n      "externalUrl": "https://airflow.company.com/dags/daily_sales_pipeline"\n    },\n    "ownership": { ... },\n    "globalTags": { ... }\n  }\n}\n'))),(0,n.yg)("h3",{id:"creating-dataflow-with-datajobs"},"Creating DataFlow with DataJobs"),(0,n.yg)("details",null,(0,n.yg)("summary",null,"Python SDK: Create a DataFlow with associated DataJobs"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.metadata.urns import DatasetUrn, TagUrn\nfrom datahub.sdk import DataFlow, DataHubClient, DataJob\n\nclient = DataHubClient.from_env()\n\n# datajob will inherit the platform and platform instance from the flow\n\ndataflow = DataFlow(\n    platform="airflow",\n    name="example_dag",\n    platform_instance="PROD",\n    description="example dataflow",\n    tags=[TagUrn(name="tag1"), TagUrn(name="tag2")],\n)\n\ndatajob = DataJob(\n    name="example_datajob",\n    flow=dataflow,\n    inlets=[\n        DatasetUrn(platform="hdfs", name="dataset1", env="PROD"),\n    ],\n    outlets=[\n        DatasetUrn(platform="hdfs", name="dataset2", env="PROD"),\n    ],\n)\n\nclient.entities.upsert(dataflow)\nclient.entities.upsert(datajob)\n\n'))),(0,n.yg)("h2",{id:"integration-points"},"Integration Points"),(0,n.yg)("h3",{id:"relationship-with-datajobs-1"},"Relationship with DataJobs"),(0,n.yg)("p",null,"DataFlows have a parent-child relationship with DataJobs through the ",(0,n.yg)("inlineCode",{parentName:"p"},"IsPartOf")," relationship. This is the primary integration point:"),(0,n.yg)("pre",null,(0,n.yg)("code",{parentName:"pre",className:"language-python"},'from datahub.sdk import DataFlow, DataJob, DataHubClient\n\n# DataJob automatically links to its parent DataFlow\nflow = DataFlow(platform="airflow", name="my_dag")\njob = DataJob(name="extract_data", flow=flow)\n')),(0,n.yg)("h3",{id:"relationship-with-datasets"},"Relationship with Datasets"),(0,n.yg)("p",null,"While DataFlows don't directly reference datasets, their child DataJobs establish lineage relationships with datasets through:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Inlets"),": Input datasets consumed by jobs"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Outlets"),": Output datasets produced by jobs")),(0,n.yg)("p",null,"This creates indirect lineage from DataFlows to datasets through their constituent jobs."),(0,n.yg)("h3",{id:"orchestrator-platform-integration"},"Orchestrator Platform Integration"),(0,n.yg)("p",null,"Common orchestrators that produce DataFlow entities:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Apache Airflow"),": Each DAG becomes a DataFlow, tasks become DataJobs"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Prefect"),": Flows are DataFlows, tasks are DataJobs"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Dagster"),": Jobs/Pipelines are DataFlows, ops/solids are DataJobs"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Azkaban"),": Flows are DataFlows, jobs are DataJobs"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Fivetran"),": Connectors are represented as DataFlows with sync operations as DataJobs")),(0,n.yg)("h3",{id:"dataprocessinstance-tracking"},"DataProcessInstance Tracking"),(0,n.yg)("p",null,"DataFlow executions can be tracked using DataProcessInstance entities, which record:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Start and end times of flow runs"),(0,n.yg)("li",{parentName:"ul"},"Success/failure status"),(0,n.yg)("li",{parentName:"ul"},"Input and output datasets for specific runs")),(0,n.yg)("p",null,"This enables tracking of pipeline run history and troubleshooting failures."),(0,n.yg)("h3",{id:"graphql-integration"},"GraphQL Integration"),(0,n.yg)("p",null,"The DataFlow entity is exposed through DataHub's GraphQL API with full support for:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"Querying flow metadata"),(0,n.yg)("li",{parentName:"ul"},"Browsing flows by orchestrator and cluster"),(0,n.yg)("li",{parentName:"ul"},"Searching flows by name, description, and project"),(0,n.yg)("li",{parentName:"ul"},"Updating flow properties (ownership, tags, terms, etc.)")),(0,n.yg)("p",null,"Key GraphQL resolvers:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"dataFlow"),": Fetch a single DataFlow by URN"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"searchAcrossEntities"),": Search for DataFlows with filters"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("inlineCode",{parentName:"li"},"updateDataFlow"),": Modify DataFlow properties")),(0,n.yg)("h2",{id:"notable-exceptions"},"Notable Exceptions"),(0,n.yg)("h3",{id:"cluster-vs-environment"},"Cluster vs Environment"),(0,n.yg)("p",null,"While DataFlows use the ",(0,n.yg)("inlineCode",{parentName:"p"},"cluster")," field in their URN for identification, they also have an ",(0,n.yg)("inlineCode",{parentName:"p"},"env")," field in the ",(0,n.yg)("inlineCode",{parentName:"p"},"dataFlowInfo")," aspect. These serve different purposes:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Cluster"),": Part of the identity, typically matches the environment but can represent specific deployment instances"),(0,n.yg)("li",{parentName:"ul"},(0,n.yg)("strong",{parentName:"li"},"Environment (env)"),": A semantic indicator of the fabric type (PROD, DEV, STAGING) that's searchable and filterable")),(0,n.yg)("p",null,'In most cases, these should align (e.g., cluster="prod" and env="PROD"), but they can diverge when multiple production clusters exist or when representing complex deployment topologies.'),(0,n.yg)("h3",{id:"platform-vs-orchestrator"},"Platform vs Orchestrator"),(0,n.yg)("p",null,"Throughout the codebase, you'll see both terms used:"),(0,n.yg)("ul",null,(0,n.yg)("li",{parentName:"ul"},"In the URN structure and key aspect, the field is called ",(0,n.yg)("inlineCode",{parentName:"li"},"orchestrator")),(0,n.yg)("li",{parentName:"ul"},"In Python SDK and some APIs, it's referred to as ",(0,n.yg)("inlineCode",{parentName:"li"},"platform"))),(0,n.yg)("p",null,"These are synonymous and refer to the same concept: the workflow management system executing the flow."),(0,n.yg)("h3",{id:"legacy-api-vs-sdk"},"Legacy API vs SDK"),(0,n.yg)("p",null,"Two APIs exist for creating DataFlows:"),(0,n.yg)("ol",null,(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Legacy API")," (",(0,n.yg)("inlineCode",{parentName:"li"},"datahub.api.entities.datajob.DataFlow"),"): Uses the older emitter pattern"),(0,n.yg)("li",{parentName:"ol"},(0,n.yg)("strong",{parentName:"li"},"Modern SDK")," (",(0,n.yg)("inlineCode",{parentName:"li"},"datahub.sdk.DataFlow"),"): Preferred approach with cleaner interfaces")),(0,n.yg)("p",null,"New code should use the modern SDK (imported from ",(0,n.yg)("inlineCode",{parentName:"p"},"datahub.sdk"),"), though both are maintained for backward compatibility."),(0,n.yg)("h3",{id:"dataflow-vs-datapipeline"},"DataFlow vs DataPipeline"),(0,n.yg)("p",null,'In some contexts, you might see references to "data pipelines" in documentation or UI. These are informal terms that refer to DataFlows. The formal entity type in the metadata model is ',(0,n.yg)("inlineCode",{parentName:"p"},"dataFlow"),", not ",(0,n.yg)("inlineCode",{parentName:"p"},"dataPipeline"),"."),(0,n.yg)("h2",{id:"technical-reference"},"Technical Reference"),(0,n.yg)("p",null,"For technical details about fields, searchability, and relationships, view the ",(0,n.yg)("strong",{parentName:"p"},"Columns")," tab in DataHub."))}c.isMDXComponent=!0}}]);